{% extends "layout.html" %}
{% block title %}Kurssisivu{% endblock %}
{% block content %}
<body>
    <div class="container">
        <h2>{{ course_name }}</h2>
        <h3>Kurssikuvaus:</h3>
        <p>{{ description }}</p>
        <h3>Kurssin opettaja:</h3>
        <p>{{ teacher }}</p>
    </div>
    <br></br>
    <div class="extraLinkBar">
            {% if session.user_role == 'student' %}
            {% if not enrolled %}
            <a href="/enroll/{{ id }}">Ilmoittaudu kurssille</a>
            {% else %}
            <p>Olet ilmoittautunut kurssille.</p>
            {% endif %}
            {% endif %}

            {% if owner %}
            <a href="/choose_exercise_type/{{ id }}">Lisää harjoitustehtäviä</a>
            <a href="/add_material/{{ id }}">Lisää tekstimateriaalia</a>
            <a href="/update_course/{{ id }}">Muokkaa kurssin tietoja</a>
            <a href="/delete_course/{{ id }}">Poista kurssi</a>
        {% endif %}
    </div>
    {% if not enrolled and not owner %}
    <div class="container">
        <p>Ilmoittaudu kurssille tarkastellaksesi kurssin tehtäviä.</p>
    </div>
    {% elif enrolled or owner %}
    <div class="container">
        <h3>Kurssimateriaali</h3>
        <ul>
            {% for item in materials %}
            <li><a href="/course_material/{{ id }}/{{ item.id }}">{{ item.headline }}</a></li>
            {% endfor %}
        </ul>
    </div>
    <div class="container">
        <h3>Tehtävät:</h3>
        <ul>
            {% for exercise in exercise_list %}
            <li><a href="/show_exercise/{{ id }}/{{ exercise.id }}/{{ exercise.type }}/{{ exercise.headline }}">{{ exercise.headline }}</a></li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    {% if owner %}
    <div class="container">
        <h3>Tehtäväsuoritukset:</h3>
        <table>
            <tr>
                <th>Opiskelijanumero</th>
                {% for exercise in exercise_list %}
                <th>{{ exercise.headline }}</th>
                {% endfor %}
                {% for student in answers %}
                    <tr>
                        <td>{{ student }}</td>
                        {% for exercise in exercise_list %}
                        {% if answers[student][exercise.id] %}
                            <td>1</td>
                        {% elif exercise.id not in answers[student] %}
                            <td>-</td>
                        {% else %}
                            <td>0</td>
                        {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tr>
        </table>
    </div>
    {% elif enrolled %}
    <div class="container">
        <h3>Tekemäsi tehtävät:</h3>
        <table>
            <tr>
                {% for exercise in exercise_list %}
                <th>{{ exercise.headline }}</th>
                {% endfor %}
                <tr>
                    {% for exercise in exercise_list %}
                    {% if answers[exercise.id] %}
                        <td>1</td>
                    {% elif exercise.id not in answers %}
                        <td>-</td>
                    {% else %}
                        <td>0</td>
                    {% endif %}
                    {% endfor %}
                </tr>
            </tr>
        </table>
    </div>
    {% endif %}
</body>

{% endblock %}