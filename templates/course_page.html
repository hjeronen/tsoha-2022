{% extends "layout.html" %}
{% block content %}

<body>
    <div class="subbar">
        <div class="subheadlineBox">
            <h2>{{ course_name }}</h2>
        </div>
    </div>
    <div class="container">
        <h3>Kurssikuvaus:</h3>
        <p>{{ description }}</p>
        <h3>Kurssin opettaja:</h3>
        <p>{{ teacher }}</p>
    </div>
    <br></br>
    <div class="extraLinkBar">
            {% if session.user_role == 'student' %}
            {% if not enrolled %}
            <a href="/enroll/{{ id }}">Ilmoittaudu kurssille</a>
            {% else %}
            <p>Olet ilmoittautunut kurssille.</p>
            {% endif %}
            {% endif %}

            {% if owner %}
            <a href="/choose_exercise_type/{{ id }}">Lisää kurssille harjoitustehtäviä</a>
            <a href="/update_course/{{ id }}">Muokkaa kurssin tietoja</a>
            <a href="/delete_course/{{ id }}">Poista kurssi</a>
        {% endif %}
    </div>
    {% if not enrolled and not owner %}
    <p>Ilmoittaudu kurssille tarkastellaksesi kurssin tehtäviä.</p>
    {% elif enrolled or owner %}
    <div class="container">
        <h3>Tehtävät:</h3>
        <ul>
            {% for exercise in exercise_list %}
            <li><a href="/show_exercise/{{ id }}/{{ exercise.id }}/{{ exercise.type }}/{{ exercise.headline }}">{{ exercise.headline }}</a></li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    {% if owner %}
    <div class="container">
        <h3>Tehtäväsuoritukset</h3>
        <table>
            <tr>
                <th>StudentNumber</th>
                {% for exercise in exercise_list %}
                <th>{{ exercise.headline }}</th>
                {% endfor %}
                {% for student in answers %}
                    <tr>
                        <td>{{ student }}</td>
                        {% for exercise in exercise_list %}
                        {% if answers[student][exercise.headline] %}
                            <td>1</td>
                        {% elif exercise.headline not in answers[student] %}
                            <td>-</td>
                        {% else %}
                            <td>0</td>
                        {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tr>
        </table>
    </div>
    {% endif %}
</body>

{% endblock %}